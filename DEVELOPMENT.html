<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Development Guide - Skylite UX</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.6;
            color: #24292e;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #ffffff;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e1e4e8;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 10px 0;
            color: #24292e;
        }
        
        .header p {
            font-size: 1.2em;
            color: #586069;
            margin: 10px 0;
        }
        
        .nav-links {
            margin: 20px 0;
        }
        
        .nav-links a {
            color: #0366d6;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .nav-links a:hover {
            text-decoration: underline;
        }
        
        hr {
            border: none;
            border-top: 1px solid #e1e4e8;
            margin: 30px 0;
        }
        
        h2 {
            font-size: 1.8em;
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 10px;
            margin-top: 40px;
            margin-bottom: 20px;
        }
        
        h3 {
            font-size: 1.4em;
            margin-top: 30px;
            margin-bottom: 15px;
        }
        
        h4 {
            font-size: 1.2em;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        
        h5 {
            font-size: 1.1em;
            margin-top: 20px;
            margin-bottom: 8px;
        }
        
        ul, ol {
            margin: 15px 0;
            padding-left: 30px;
        }
        
        li {
            margin: 8px 0;
        }
        
        code {
            background-color: #f6f8fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 0.9em;
        }
        
        pre {
            background-color: #f6f8fa;
            padding: 16px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid #e1e4e8;
        }
        
        pre code {
            background-color: transparent;
            padding: 0;
        }
        
        .toc {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
            border: 1px solid #e1e4e8;
        }
        
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .toc li {
            margin: 5px 0;
        }
        
        .toc a {
            color: #0366d6;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e1e4e8;
            color: #586069;
        }
        
        .project-structure {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 0.9em;
            line-height: 1.4;
            overflow-x: auto;
        }
        
        .step-list {
            counter-reset: step-counter;
        }
        
        .step-list li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .step-list li::before {
            content: counter(step-counter);
            background-color: #0366d6;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
            margin-left: -30px;
        }
        
        .branch-strategy {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
            margin: 20px 0;
        }
        
        .branch-strategy ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .branch-strategy li {
            margin: 10px 0;
            padding: 8px 12px;
            background-color: white;
            border-radius: 4px;
            border-left: 4px solid #0366d6;
        }
        
        .integration-steps {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
            margin: 20px 0;
        }
        
        .integration-steps ol {
            counter-reset: integration-step;
        }
        
        .integration-steps li {
            counter-increment: integration-step;
            margin: 15px 0;
            padding-left: 20px;
        }
        
        .integration-steps li::before {
            content: counter(integration-step);
            background-color: #28a745;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 10px;
            margin-left: -30px;
        }
        
        .docker-compose {
            background-color: #f6f8fa;
            padding: 20px;
            border-radius: 6px;
            border: 1px solid #e1e4e8;
            margin: 20px 0;
        }
        
        .docker-compose pre {
            background-color: transparent;
            padding: 0;
            border: none;
            margin: 0;
        }
        
        .troubleshooting {
            background-color: #fff5f5;
            border: 1px solid #fed7d7;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .troubleshooting h4 {
            color: #c53030;
            margin-top: 0;
        }
        
        .resources {
            background-color: #f0fff4;
            border: 1px solid #c6f6d5;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .resources h2 {
            color: #22543d;
            border-bottom-color: #c6f6d5;
        }
        
        .resources a {
            color: #0366d6;
            text-decoration: none;
        }
        
        .resources a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Development Guide</h1>
        <p>Welcome to the Skylite UX development guide! This document will help you set up your development environment and understand the project structure.</p>
        
        <div class="nav-links">
            <a href="index.html">Home</a> • 
            <a href="CONTRIBUTING.html">Contributing</a> • 
            <a href="#prerequisites">Prerequisites</a> • 
            <a href="#quick-start">Quick Start</a> • 
            <a href="#project-structure">Project Structure</a>
        </div>
    </div>

    <div class="toc">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#prerequisites">Prerequisites</a></li>
            <li><a href="#quick-start">Quick Start</a></li>
            <li><a href="#project-structure">Project Structure</a></li>
            <li><a href="#development-workflow">Development Workflow</a></li>
            <li><a href="#integrations">Integrations</a></li>
            <li><a href="#testing">Testing</a></li>
            <li><a href="#building">Building</a></li>
            <li><a href="#troubleshooting">Troubleshooting</a></li>
        </ul>
    </div>

    <section id="prerequisites">
        <h2>Prerequisites</h2>
        <p>Before you begin, ensure you have the following installed:</p>
        <ul>
            <li><a href="https://docs.docker.com/get-started/get-docker/">Docker</a></li>
            <li><a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
        </ul>
    </section>

    <section id="quick-start">
        <h2>Quick Start</h2>
        <ul>
            <li>Fork the repo and create your feature branch from <code>dev</code>.</li>
            <li>Install <a href="https://docs.docker.com/get-started/get-docker/">Docker</a></li>
            <li>Install <a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
            <li>In VS Code <a href="https://code.visualstudio.com/docs/devcontainers/containers#_quick-start-open-a-git-repository-or-github-pr-in-an-isolated-container-volume">open the command palette and select</a> <code>Dev Containers: Clone Repository in Container Volume</code>. Select your repository and branch.</li>
            <li>Start the development server on <code>http://localhost:3000</code> with:</li>
        </ul>
        <pre><code># npm
npm run dev</code></pre>
    </section>

    <section id="project-structure">
        <h2>Project Structure</h2>
        <div class="project-structure">
<pre>Skylite-UX/
├── .devcontainer/           # Dev container configuration
│   └── integrations/        # Compose files to deploy integration containers
├── app/                     # Main application code
│   ├── assets/              # Static assets (CSS, images, etc.)
│   ├── components/          # Vue components
│   │   ├── calendar/        # Calendar-related components
│   │   ├── global/          # Global/shared components
│   │   ├── settings/        # Settings page components
│   │   ├── shopping/        # Shopping list components
│   │   └── todos/           # Todo list components
│   ├── composables/         # Vue composables
│   ├── integrations/        # External integration files
│   ├── lib/                 # Library configurations
│   ├── pages/               # Application pages (auto-routed)
│   ├── plugins/             # Nuxt plugins
│   ├── types/               # TypeScript type definitions
│   ├── utils/               # Utility functions
│   ├── app.config.ts        # App configuration
│   └── app.vue              # Root Vue component
├── prisma/                  # Database schema and migrations
│   ├── migrations/          # Database migration files
│   └── schema.prisma        # Prisma schema definition
├── public/                  # Public static assets
├── server/                  # Server-side code
│   ├── api/                 # API endpoints
│   │   ├── integrations/    # Integration API routes
│   │   ├── shopping-lists/  # Shopping list API routes
│   │   ├── todos/           # Todo API routes
│   │   └── users/           # User API routes
│   ├── integrations         # Integration service files
│   └── plugins/             # Server plugins
├── eslint.config.mjs        # ESLint configuration
├── LICENSE.md               # Project license
├── nuxt.config.ts           # Nuxt configuration
├── package.json             # Dependencies and scripts
├── README.md                # Project documentation
└── tsconfig.json            # TypeScript configuration</pre>
        </div>
    </section>

    <section id="development-workflow">
        <h2>Development Workflow</h2>
        
        <h3>1. Branch Strategy</h3>
        <div class="branch-strategy">
            <ul>
                <li><strong>main</strong>: Production-ready code</li>
                <li><strong>dev</strong>: Development branch (default for PRs)</li>
                <li><strong>feature/*</strong>: New features</li>
                <li><strong>bugfix/*</strong>: Bug fixes</li>
                <li><strong>hotfix/*</strong>: Critical production fixes</li>
            </ul>
        </div>

        <h3>2. Development Process</h3>
        <ol class="step-list">
            <li><strong>Create a branch</strong>
                <pre><code>git checkout dev
git pull origin dev
git checkout -b feature/your-feature-name</code></pre>
            </li>
            <li><strong>Make your changes</strong>
                <ul>
                    <li>Write code following the style guide</li>
                    <li>Add tests for new features</li>
                    <li>Update documentation (if required)</li>
                </ul>
            </li>
            <li><strong>Test your changes</strong>
                <pre><code>npm run test
npm run lint
npm run type-check</code></pre>
            </li>
            <li><strong>Commit your changes</strong>
                <pre><code>git add .
git commit -m "feat: add new feature description"</code></pre>
            </li>
            <li><strong>Push and create PR</strong>
                <pre><code>git push origin feature/your-feature-name
# Create Pull Request to dev branch</code></pre>
            </li>
        </ol>

        <h3>3. Code Style</h3>
        <ul>
            <li>Use <strong>TypeScript</strong> for all new code</li>
            <li>Follow <strong>Vue 3 Composition API</strong> patterns</li>
            <li>Use <strong>Tailwind CSS</strong> for styling</li>
            <li>Follow <strong>ESLint</strong> and <strong>Prettier</strong> rules</li>
            <li>Write meaningful commit messages</li>
        </ul>
    </section>

    <section id="integrations">
        <h2>Integrations</h2>
        <p>Skylite UX is designed to integrate with various external and self-hosted services. This section covers how to set up and configure integrations for development.</p>

        <h3>Integration Development</h3>

        <h4>Adding New Features to Existing Self-Hosted Integrations</h4>
        <ol class="step-list">
            <li><strong>Spin up the Docker container</strong> found in <code>Skylite-UX/.devcontainer/integrations/</code></li>
            <li><strong>Generate an API key</strong> for the service</li>
            <li><strong>Add the service to Skylite</strong> in Settings > Integrations > Add Integration</li>
            <li><strong>Make your changes, test, and commit</strong> as defined in the <a href="#development-workflow">Development Workflow</a></li>
        </ol>

        <h4>Adding New Integrations</h4>
        <div class="integration-steps">
            <ol>
                <li><strong>Create a new folder</strong> in <code>Skylite-UX/.devcontainer/integrations/</code></li>
                <li><strong>Create a Docker Compose file</strong> for the new service you are integrating</li>
                <li><strong>Add a new folder</strong> in <code>Skylite-UX/app/integrations/</code></li>
                <li><strong>Create your integration file</strong></li>
                <li><strong>Add a new folder</strong> in <code>Skylite-UX/server/api/integrations</code></li>
                <li><strong>Create your API endpoint file</strong></li>
                <li><strong>Add a new folder</strong> in <code>Skylite-UX/server/integrations</code></li>
                <li><strong>Create your service files</strong></li>
                <li><strong>Add your service</strong> in <code>Skylite-UX/app/integrations/integrationConfig.ts</code> so it will be picked up when Skylite starts</li>
                <li><strong>Spin up your Docker container</strong></li>
                <li><strong>Generate an API key</strong></li>
                <li><strong>Add the service to Skylite</strong> in Settings > Integrations > Add Integration</li>
                <li><strong>Test and commit</strong> as defined in the <a href="#development-workflow">Development Workflow</a></li>
            </ol>
        </div>

        <h3>Integration Configuration</h3>

        <h4>Docker Compose for Integrations</h4>
        <div class="docker-compose">
            <pre><code># .devcontainer/integrations/service/service-docker-compose.yml
version: '3.8'

services:
  # Comments about the integration
  # How to create API key, base URL, etc.
  # Base URL: http://mealie:9000
  mealie:
    image: ghcr.io/mealie-recipes/mealie:latest 
    container_name: mealie
    restart: always
    ports:
      - "9925:9000" # External port mapping
    deploy:
      resources:
        limits:
          memory: 1000M # Memory limit
    volumes:
      - mealie-data:/app/data/
    environment:
      # Set Backend ENV Variables Here
      ALLOW_SIGNUP: false
      PUID: 1000
      PGID: 1000
      TZ: America/Anchorage
    # Make sure the service runs on the same network as the dev container
    networks:
      skylite-ux_devcontainer_default:

volumes:
  mealie-data:
  
# Make sure the service runs on the same network as the dev container
networks:
  skylite-ux_devcontainer_default:
    external: true</code></pre>
        </div>

        <h4>Defining Your Integration in integrationConfig.ts</h4>
        <pre><code>{
    type: "shopping", // calendar,todo,shopping,meal
    service: "tandoor", // the name of the service you are integrating 
    settingsFields: [
      // fields used for setting up the integration
      {
        key: 'apiKey',
        label: 'API Key',
        type: 'password' as const,
        placeholder: 'Scope needs to be "read write"',
        required: true,
        description: 'Your Tandoor API key for authentication'
      },
      {
        key: 'baseUrl',
        label: 'Base URL',
        type: 'url' as const,
        placeholder: 'http://your-tandoor-instance:port',
        required: true,
        description: 'The base URL of your Tandoor instance'
      }
    ],
    capabilities: ["add_items", "edit_items"], // declare your capabilities 
    icon: "https://cdn.jsdelivr.net/gh/selfhst/icons/svg/tandoor-recipes.svg", // icon URL from selfh.st/icons
    files: [
      // list your integration paths
      "/integrations/tandoor/tandoorShoppingLists.ts", 
      "/server/api/integrations/tandoor/[...path].ts",
      "/server/integrations/tandoor/"
    ],
    dialogFields: [
      // fields used for dialog 
      {
        key: 'name',
        label: 'Item Name',
        type: 'text' as const,
        placeholder: 'Milk, Bread, Apples, etc.',
        required: true,
        canEdit: true,
      },
      {
        key: 'quantity',
        label: 'Quantity',
        type: 'number' as const,
        min: 0,
        canEdit: true,
      },
      {
        key: 'unit',
        label: 'Unit',
        type: 'text' as const,
        placeholder: 'Disabled for Tandoor',
        canEdit: false,
      },
    ],
  },</code></pre>

        <h3>Troubleshooting Integrations</h3>

        <h4>Common Issues</h4>

        <h5>Authentication Errors</h5>
        <div class="troubleshooting">
            <pre><code># Ensure service is on the same Docker network as dev container
# Ensure correct base URL
# Check token expiration</code></pre>
        </div>

        <h5>Data Sync Issues</h5>
        <div class="troubleshooting">
            <pre><code># Check network connectivity
# Verify API endpoints
# Review error logs
# Test with minimal data set</code></pre>
        </div>
    </section>

    <section id="testing">
        <h2>Testing</h2>

        <h3>Running Tests</h3>
        <pre><code># Run all tests
npm run test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm run test:coverage

# Run specific test file
npm run test:unit components/MyComponent.test.ts</code></pre>

        <h3>Writing Tests</h3>
        <ul>
            <li>Use <strong>Vitest</strong> for unit testing</li>
            <li>Use <strong>@vue/test-utils</strong> for component testing</li>
            <li>Write tests for all new features</li>
            <li>Aim for >80% code coverage</li>
        </ul>

        <h3>Example Test</h3>
        <pre><code>import { describe, it, expect } from 'vitest'
import { mount } from '@vue/test-utils'
import MyComponent from '~/components/MyComponent.vue'

describe('MyComponent', () => {
  it('renders correctly', () => {
    const wrapper = mount(MyComponent)
    expect(wrapper.exists()).toBe(true)
  })
})</code></pre>
    </section>

    <section id="building">
        <h2>Building</h2>

        <h3>Development Build</h3>
        <pre><code>npm run build:dev</code></pre>

        <h3>Production Build</h3>
        <pre><code>npm run build</code></pre>

        <h3>Preview Production Build</h3>
        <pre><code>npm run preview</code></pre>

        <h3>Docker Build</h3>
        <pre><code># Build Docker image
docker build -t skylite-ux .

# Run Docker container
docker run -p 3000:3000 skylite-ux</code></pre>
    </section>

    <section id="troubleshooting">
        <h2>Troubleshooting</h2>

        <h3>Common Issues</h3>

        <h4>Port Already in Use</h4>
        <div class="troubleshooting">
            <pre><code># Find process using port 3000
lsof -i :3000

# Kill the process
kill -9 &lt;PID&gt;</code></pre>
        </div>

        <h4>Node Modules Issues</h4>
        <div class="troubleshooting">
            <pre><code># Clear npm cache
npm cache clean --force

# Remove node_modules and reinstall
rm -rf node_modules package-lock.json
npm install</code></pre>
        </div>

        <h4>Docker Issues</h4>
        <div class="troubleshooting">
            <pre><code># Clean up Docker containers
docker system prune -a

# Rebuild without cache
docker-compose build --no-cache</code></pre>
        </div>

        <h4>TypeScript Errors</h4>
        <div class="troubleshooting">
            <pre><code># Check TypeScript configuration
npm run type-check

# Regenerate TypeScript types
npm run types:generate</code></pre>
        </div>

        <h3>Getting Help</h3>
        <ul>
            <li>Check the <a href="https://github.com/wetzel402/Skylite-UX/issues">Issues</a> page</li>
            <li>Search existing discussions</li>
            <li>Create a new issue with detailed information</li>
            <li>Join our <a href="https://discord.gg/KJn3YfWxn7">Discord</a> for real-time help</li>
        </ul>
    </section>

    <div class="resources">
        <h2>Additional Resources</h2>
        <ul>
            <li><a href="https://nuxt.com/docs">Nuxt Documentation</a></li>
            <li><a href="https://vuejs.org/">Vue Documentation</a></li>
            <li><a href="https://tailwindcss.com/docs">Tailwind CSS Documentation</a></li>
            <li><a href="https://www.typescriptlang.org/docs/">TypeScript Documentation</a></li>
            <li><a href="https://vitest.dev/">Vitest Documentation</a></li>
        </ul>
    </div>

    <div class="footer">
        <p><small>Happy coding!</small></p>
    </div>
</body>
</html> 